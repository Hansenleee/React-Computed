!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e(require("react")):"function"==typeof define&&define.amd?define(["react"],e):t["react-computed"]=e(t.react)}(this,function(t){"use strict";let e={},o={},n="";const c=Object.prototype.hasOwnProperty;function s(t,e){if(!n)return;const o=e[t];o?-1===o.indexOf(n)&&o.push(n):e[t]=[n]}var i={initDepend(t){var n;e={},o={},n=t._this.state,Object.entries(n).forEach(([t,o])=>{Object.defineProperty(n,t,{get:()=>(s(t,e),o)})}),function(t){const e=t._computedParams,n=t.computed;Object.entries(e).forEach(([e,i])=>{Object.defineProperty(t.componetComputed,e,{get:()=>(s(e,o),c.call(n,e)?n[e]:"function"==typeof i?i.call(t):i),set:n=>{const c=o[e];return Array.isArray(c)&&c.length>0&&t.triggerComputed(c),n}})})}(t)},getDepend:()=>({dependOnState:e,dependOnComputed:o}),setOnCalcuatingCopmuted(t){n=t},getOnCalcuatingCopmuted:t=>n};class p{constructor(t,e){"object"==typeof t&&(this._computedParams=t,this._this=e,this.computed=({}={}),this.componetComputed={},this._this.computed=this.componetComputed,this.createComputed())}createComputed(){i.initDepend(this),this.triggerComputed(Object.keys(this._computedParams))}observerState(t){const e=this._this.state,o=i.getDepend(),n=[],c=[];Object.entries(e).forEach(([e,c])=>{if(c!==t[e]){const t=o.dependOnState[e];t&&n.push(t)}}),n.forEach(t=>{t.forEach(t=>{-1===c.indexOf(t)&&c.push(t)})}),c.length>0&&(this.triggerComputed(c),this._this.forceUpdate())}triggerComputed(t){t.forEach(t=>{const e=this._computedParams[t];i.setOnCalcuatingCopmuted(t),this.componetComputed[t]=this.computed[t]="function"==typeof e?e.call(this._this):e,i.setOnCalcuatingCopmuted("")})}}return class extends t.Component{createComputed(t,e){return this._computed=new p(t,e||this),this._computed.componetComputed}componentDidUpdate(t,e){this._computed.observerState(e)}}});
